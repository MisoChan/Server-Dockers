#!bin/sh

# DIRECTORY=/Server-Dockers/dnsmasq/dns_blocks
RESOLUTION=$RESPONSE_IPv4
RESOLUTION_V6=$RESPONSE_IPv6

LOGMSG=DNS_UPDATE_PROC_IS_DONE

#hostnamelist
rm -rf $DIRECTORY/hostnames.txt
wget -O $DIRECTORY/hostnames_raw.txt https://raw.githubusercontent.com/notracking/hosts-blocklists/master/hostnames.txt

cat $DIRECTORY/hostnames_raw.txt $DIRECTORY/static_blockhosts.txt >> $DIRECTORY/hostnames.txt



#domainslist
rm -rf $DIRECTORY/domains.txt
wget https://raw.githubusercontent.com/notracking/hosts-blocklists/master/domains.txt -P $DIRECTORY


#pgl.yoyo.org
wget -O $DIRECTORY/pgl.txt https://pgl.yoyo.org/as/serverlist.php?hostformat=dnsmasq&showintro=1&mimetype=plaintext  && \
cat $DIRECTORY/pgl.txt |grep -E '^address'|sed -e "s/127.0.0.1/$RESOLUTION/g" >> $DIRECTORY/domains.txt

wget -O $DIRECTORY/malware.txt https://www.malwaredomainlist.com/hostslist/hosts.txt && \
cat $DIRECTORY/malware.txt |grep -E '^address'|sed -e  "s/127.0.0.1/$RESOLUTION/g" >> $DIRECTORY/domains.txt 


#Warui_Internet
rm -rf $DIRECTORY/warui_host.txt
wget -O $DIRECTORY/warui_host.txt https://warui.intaa.net/adhosts/hosts.txt
cat  $DIRECTORY/warui_host.txt >> $DIRECTORY/hostnames.txt

sed -i  "s/127\.0\.0\.1 /$RESOLUTION /g" $DIRECTORY/hostnames.txt 
sed -i  "s/0\.0\.0\.0 /$RESOLUTION /g" $DIRECTORY/hostnames.txt 
sed -i  "s/:: /$RESOLUTION_V6 /g" $DIRECTORY/hostnames.txt 

cat $DIRECTORY/static_blockdomain.txt >> $DIRECTORY/domains.txt
cat $DIRECTORY/static_blockhosts.txt >> $DIRECTORY/hostnames.txt

sed -i  "s/127\.0\.0\.1/$RESOLUTION/g" $DIRECTORY/domains.txt 
sed -i  "s/0\.0\.0\.0/$RESOLUTION/g" $DIRECTORY/domains.txt 

